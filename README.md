# Javaバイトコードをさわってみよう

## 使用するコマンドの一覧

### このリポジトリのクローン

gitが使える環境の方はこちらのコマンドでクローンできます。

```bash
git clone https://github.com/Oni-Men/BytecodeTutorial.git
```

### JDKのバージョン表示

```bash
javac --version
```

何かしらバージョンが出力されればJDKが入っているでしょう。
`command not found`などと出力される場合はパスが通ってないでしょう。
インストールの方法は、各自環境に合った方法をggるなりしてください。

### Javaソースコードのコンパイル

```bash
javac Hello.java
```

### コンパイルしたクラスの実行

```bash
java Hello.class
```

`java`はJVMを起動するコマンドです。
Hello.classの`main`関数を呼び出します。

### クラスファイルの詳細表示

```bash
javap -v Hello.class
```

`-v`オプションを付けると表示項目が増えます。

### クラスファイルのバイナリ表示

スライドでは登場しませんがターミナルでバイナリを表示したいときに使えます。
macOSかLinuxであれば`od`コマンドが使えるはずです。Windowsで使えるかはよくわかりません。

```bash
od -tx1 Hello.class
```

`-t`オプションで出力フォーマットを変更できます。
`x1`を指定することで1バイトずつ16進数で出力します。
先頭4バイトが`ca fe ba be`となっているはずです。

```bash
xxd Hello.class
```

テキストと16進数を同時に表示することができます。

#### 出力例

```bash
$ xxd Hello.class
00000000: cafe babe 0000 003f 001d 0a00 0200 0307  .......?........
00000010: 0004 0c00 0500 0601 0010 6a61 7661 2f6c  ..........java/l
00000020: 616e 672f 4f62 6a65 6374 0100 063c 696e  ang/Object...<in
00000030: 6974 3e01 0003 2829 5609 0008 0009 0700  it>...()V.......
00000040: 0a0c 000b 000c 0100 106a 6176 612f 6c61  .........java/la
00000050: 6e67 2f53 7973 7465 6d01 0003 6f75 7401  ng/System...out.
00000060: 0015 4c6a 6176 612f 696f 2f50 7269 6e74  ..Ljava/io/Print
00000070: 5374 7265 616d 3b08 000e 0100 1153 6565  Stream;......See
```